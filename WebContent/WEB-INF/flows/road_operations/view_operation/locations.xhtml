<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:sf="http://www.springframework.org/tags/faces"
	xmlns:hx="http://www.ibm.com/jsf/html_extended"
	xmlns:sec="http://www.springframework.org/security/tags"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/newTemplate.xhtml">

	<ui:define name="title">Road Operation Search</ui:define>
	<ui:define name="pageHeader"></ui:define>




	<ui:define name="content">
		<ui:fragment id="messages">
			<div id="messagesInsertionPoint">
				<h:messages errorClass="error" infoClass="info" layout="list" />
			</div>
		</ui:fragment>
		
		<h:form id="operationDetails">
			<fieldset><legend title="operationDetails">Strategy and Location Details</legend></fieldset>
			
			<div style="border:3px solid grey; pading-bottom:30px;width: 70%;">
				<div style="padding-top:10px">
					<a>Indicate Strategies for the operation</a>
				</div>
				
				<div style="padding-right: 40px; float:left">
						<h:outputText value="Available Strategies"></h:outputText>
					</div>
					<div style="float:left">
						<h:outputText value="Selected Strategies"></h:outputText>
					</div>
					<br/>
				<div>
				    <p:pickList id="pickList" value="#{availableStrategies}" var="strategy"   
				                itemLabel="#{strategy}" itemValue="#{strategy}" showCheckbox="true"/>  
				  
				</div>
				<br></br>
				<br></br>
				<br></br>
			</div>
			
			
			
			<div id="locDet" style="border:3px solid grey; pading-bottom:30px;width: 70%;">
			
			<table>
				<tr>
				<td>
					
					<div style="overflow-y: scroll; height:400px">
					<h:dataTable style="float:left" border="2" rows="10" first="0" footerClass="footerClass" rowClasses="even,odd" cellpadding="0"
							cellspacing="0" id="availParishes" value="#{availableParishes}" var="par" rules="none">
        				
        						<f:facet name="header">
							        <h:outputText value="Parishes" />
							    </f:facet>
        						<h:column>
	        						<sf:ajaxEvent action="showLocationsForParish" event="onclick" processIds="*">
									<h:selectBooleanCheckbox id="selectPar" value="#{par.selected}"/>
									</sf:ajaxEvent>
									<h:commandLink value="#{par.parishCode}" action="#{roadOperationsServiceAction.populateLocationList}" />
								</h:column>
	            				<h:column>
		        					<h:outputText value="#{par.description}" ></h:outputText>	
		        				</h:column>
		        	</h:dataTable>
		        	</div>
			   </td>
			
			
			<td>
			<div style="overflow-y: scroll; height:400px">
					<h:dataTable border="2" style="float:left" rows="10" first="0" footerClass="footerClass" rowClasses="even,odd" cellpadding="0"
							cellspacing="0" id="availLocations" value="#{availableLocations}" var="loc">
        				
        						<f:facet name="header">
							        <h:outputText value="Locations" />
							    </f:facet>
        						<h:column>
	        						
									<h:selectBooleanCheckbox id="selectPar" value="#{loc.selected}"/>
									
								</h:column>
	            				<h:column>
		        					
		        					<h:outputText value="#{loc.locationDescription}" ></h:outputText>	
		        				</h:column>
		        				
		        				<h:column>
	        					
									<h:graphicImage id="refineArt" value="/images/icon-sun.png"/>
									
								</h:column>
		        	</h:dataTable>
		        	</div>
			</td>
			
			<td>
					<div style="overflow-y: scroll; height:400px">
					<h:dataTable border="2" style="float:left" rows="10" first="0" footerClass="footerClass" rowClasses="even,odd" cellpadding="0"
							cellspacing="0" id="availArteries" value="#{availableArteries}" var="art">
		        				<f:facet name="header">
							        <h:outputText value="Arteries" />
							    </f:facet>
        						<h:column>
	        						
									<h:selectBooleanCheckbox id="selectPar" value="#{loc.selected}"/>
									
								</h:column>
	            				<h:column>
		        					
		        					<h:outputText value="#{loc.locationDescription}" ></h:outputText>	
		        				</h:column>
		        				
		        				<h:column>
	        					
									<h:graphicImage id="refineArt" value="/images/icon-sun.png"/>
									
								</h:column>
		        	</h:dataTable>
		        	</div>
			</td>
			</tr>
			
		        </table>	
		        	
		        	<br></br>
		        	<br></br>
		        	<br></br>
		        	
		        	</div>
        	<sf:commandButton id="dummyButton" value="TEST" action="showLocationsForParish" processIds="*" disabled="false"></sf:commandButton>
        	
        	
        	
        	
        
			
		</h:form>
		
	

			<script type="text/javascript">
			
			$(document).ready( function() {
				addOnclickToDatatableRows();
			   				    
			  });
			
// 			function getLocations()
// 			{
				
// 				alert("HEY");
// 					$("input[id*='dummyButton']").click();
// 				 document.getElementById("roadOperationView:tabView:operationDetails:dummyButton").click();
// 			}
			
			
// 			function addOnclickToDatatableRows() {
// 			    var trs = document.getElementById('availParishes').getElementsByTagName('tbody')[0].getElementsByTagName('tr');
// 			    for (var i = 0; i &lt; trs.length; i++) {
// 			        trs[i].onclick = new Function("highlightRow(this)");
// 			    }
// 			}

// 			function highlightRow(tr) {
// 			    tr.bgColor = (tr.bgColor != '#ff0000') ? '#ff0000' : '#ffffff';
// 			}
  			</script>	
				 
</ui:define>	
</ui:composition>
